<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Liên hệ</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="admin">
    <!-- Sidebar -->
    <aside class="sidebar">
        <h2>⚡ Solar Admin</h2>
        <ul>
            <li><a href="index.html">Dashboard</a></li>
            <li><a href="customers.html">Khách hàng</a></li>
            <li><a href="projects.html">Dự án</a></li>
            <li><a href="quotes.html">Báo giá</a></li>
            <li class="active"><a href="contacts.html">Liên hệ</a></li>
            <li><a href="posts.html">Bài viết</a></li>
        </ul>
    </aside>

    <!-- Content -->
    <main class="content">
        <div class="content-header">
            <h1>Liên hệ</h1>
        </div>

        <table class="table">
            <thead>
                <tr>
                    <th>STT</th>
                    <th>Họ tên</th>
                    <th>Email</th>
                    <th>SĐT</th>
                    <th>Nội dung</th>
                    <th>Trạng thái</th>
                    <th>Ngày gửi</th>
                    <th>Hành động</th>
                </tr>
            </thead>
            <tbody id="contactTable"></tbody>
        </table>
    </main>
</div>

<script>
let contacts = JSON.parse(localStorage.getItem("contacts")) || [
    {
        id: 1,
        name: "Nguyễn Văn A",
        email: "a@gmail.com",
        phone: "0987654321",
        message: "Tôi cần tư vấn hệ thống điện mặt trời",
        status: "Chưa đọc",
        date: "20/01/2026"
    }
];

function saveContacts() {
    localStorage.setItem("contacts", JSON.stringify(contacts));
}

function renderContacts() {
    const table = document.getElementById("contactTable");
    table.innerHTML = "";

    contacts.forEach((c, index) => {
        table.innerHTML += `
        <tr>
            <td>${index + 1}</td>
            <td>${c.name}</td>
            <td>${c.email}</td>
            <td>${c.phone}</td>
            <td>${c.message.slice(0, 30)}...</td>
            <td>
                <span class="status ${c.status === 'Đã đọc' ? 'approved' : 'pending'}">
                    ${c.status}
                </span>
            </td>
            <td>${c.date}</td>
            <td>
                <button class="btn view" onclick="viewContact(${c.id})">Xem</button>
                <button class="btn delete" onclick="deleteContact(${c.id})">Xóa</button>
            </td>
        </tr>`;
    });
}

function viewContact(id) {
    const c = contacts.find(item => item.id === id);
    c.status = "Đã đọc";
    saveContacts();
    renderContacts();

    alert(
`HỌ TÊN: ${c.name}
EMAIL: ${c.email}
SĐT: ${c.phone}

NỘI DUNG:
${c.message}`
    );
}

function deleteContact(id) {
    if (!confirm("Xóa liên hệ này?")) return;
    contacts = contacts.filter(c => c.id !== id);
    saveContacts();
    renderContacts();
}

renderContacts();
</script>

</body>
</html>
